# 云端知识库性能测试报告

**生成时间**: 2026-02-02 16:54:12

## 一、参与对比的知识库

本报告对比以下 **4 个云端知识库**：

1. **AWS Bedrock KB (OpenSearch Serverless)**：基于 Amazon OpenSearch Serverless 的向量检索，HNSW 索引，专为 k-NN 搜索优化，部署简单、自动扩展。
1. **AWS Bedrock KB (Aurora PostgreSQL Serverless)**：基于 Aurora PostgreSQL Serverless v2 + pgvector，完整 SQL、ACID 事务，成本低，需 VPC。
1. **火山引擎 VikingDB**：字节跳动云自研向量引擎，支持混合检索与内置 Rerank，中文优化。
1. **阿里云百炼**：阿里云智能体知识库，自研向量与混合检索，中文深度优化，内置 Rerank。

### 🏗️ 架构特点对比

### 🏗️ 架构特点对比

| 特性 | AWS OpenSearch | AWS Aurora PG | 火山引擎 VikingDB | 阿里云百炼 |
|------|---------------|---------------|------------------|------------|
| **底层技术** | OpenSearch + HNSW | PostgreSQL + pgvector | 自研向量引擎 | 自研向量引擎 |
| **索引类型** | HNSW | IVFFlat/HNSW | HNSW + Hybrid | 混合检索 |
| **SQL支持** | 有限 | ✅ 完整 | 有限 | 有限 |
| **ACID事务** | ❌ | ✅ | ❌ | ❌ |
| **自动扩展** | ✅ | ✅ | ✅ | ✅ |
| **部署复杂度** | 简单 | 中等(需VPC) | 简单 | 简单 |
| **中文优化** | 一般 | 一般 | ✅ 优化 | ✅ 深度优化 |
| **混合检索** | 支持 | 需自实现 | ✅ 原生支持 | ✅ 原生支持 |
| **Rerank** | 需自实现 | 需自实现 | ✅ 内置 | ✅ 内置 |


## 二、测试方法

**测试方法**：

- **文档规模**：各知识库已**预先入库 100 个文档**（小学考试题目），本次测试不执行上传与建索引。
- **查询测试**：使用 test-data 中的题目生成查询，对每个知识库执行相同查询，统计延迟与吞吐。
- **质量评估**：基于查询与 ground truth 计算 Precision@1、MRR、NDCG@10 等检索质量指标。
- **成本对比**：基于各云厂商公开定价估算 100 文档规模下的月度成本。


## 三、对比结果

### 时延对比

| 知识库 | P50 (ms) | P95 (ms) | P99 (ms) | 平均 (ms) |
|--------|----------|----------|----------|-----------|
| AWSBedrockKB-OpenSearch | 602.66 | 1424.13 | 1540.60 | 841.04 |
| AWSBedrockKB-Aurora | 647.41 | 1770.81 | 1995.37 | 920.21 |
| VolcengineVikingDB | 716.47 | 1131.27 | 1171.02 | 830.07 |
| AlibabaBailian | 3743.12 | 5527.57 | 5803.69 | 3422.29 |

### 吞吐对比

| 知识库 | QPS | 总请求数 | 成功率 |
|--------|-----|----------|--------|
| AWSBedrockKB-OpenSearch | 1.11 | 5 | 100.0% |
| AWSBedrockKB-Aurora | 1.06 | 5 | 100.0% |
| VolcengineVikingDB | 0.88 | 5 | 100.0% |
| AlibabaBailian | 0.29 | 5 | 100.0% |

### 检索质量对比

| 知识库 | Precision@1 | MRR | NDCG@10 |
|--------|-------------|-----|---------|
| AWSBedrockKB-OpenSearch | 0.800 | 0.800 | 0.631 |
| AWSBedrockKB-Aurora | 0.400 | 0.480 | 0.604 |
| VolcengineVikingDB | 0.400 | 0.420 | 0.804 |
| AlibabaBailian | 0.600 | 0.600 | 0.590 |

### 成本对比（100 文档规模估算）

| 知识库 | 数据量 | 月度成本 | 成本构成 |
|--------|--------|----------|----------|
| AWS Bedrock (OpenSearch) | 0.1GB | ~$700/月 | 4 OCU × $0.24 × 730h |
| AWS Bedrock (Aurora PG) | 0.1GB | ~$44/月 | 0.5 ACU × $0.12 × 730h |
| 火山引擎 VikingDB | 0.1GB | ~¥300/月 | 实例费 + 存储费 |
| 阿里云百炼 | 0.1GB | ~¥200/月 | 按调用次数计费 |

### 综合对比

| 知识库 | P50延迟 | P95延迟 | QPS | P@1 | MRR | NDCG@10 |
|--------|---------|---------|-----|-----|-----|---------|
| AWSBedrockKB-OpenSearch | 602.66ms | 1424.13ms | 1.11 | 0.800 | 0.800 | 0.631 |
| AWSBedrockKB-Aurora | 647.41ms | 1770.81ms | 1.06 | 0.400 | 0.480 | 0.604 |
| VolcengineVikingDB | 716.47ms | 1131.27ms | 0.88 | 0.400 | 0.420 | 0.804 |
| AlibabaBailian | 3743.12ms | 5527.57ms | 0.29 | 0.600 | 0.600 | 0.590 |
### 🏆 综合评分对比

| 知识库 | 性能得分 | 质量得分 | 成本得分 | 易用性 | 综合评分 | 推荐场景 |
|--------|---------|---------|---------|--------|---------|----------|
| AWSBedrockKB-OpenSearch | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | 性能优先 |
| AWSBedrockKB-Aurora | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 成本优先 |
| VolcengineVikingDB | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 国内应用 |
| AlibabaBailian | ⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | 质量优先 |

### 🎯 检索质量深度分析

**质量冠军**: AWSBedrockKB-OpenSearch

- **MRR (Mean Reciprocal Rank)**: 0.800 - 衡量正确结果的平均排名位置
- **Precision@1**: 0.800 - 首位结果的准确率
- **召回能力**: 在相同查询下返回更多相关文档

**质量差异分析**:

1. 🥇 **AWSBedrockKB-OpenSearch** - MRR: 0.800, P@1: 0.800 (最佳检索质量)
2. 🥈 **AlibabaBailian** - MRR: 0.600, P@1: 0.600
3. 🥉 **AWSBedrockKB-Aurora** - MRR: 0.480, P@1: 0.400
4. **VolcengineVikingDB** - MRR: 0.420, P@1: 0.400

### ⚡ 性能特点总结

- **最快响应**: AWSBedrockKB-OpenSearch (P50: 602.66ms)
- **质量最佳**: AWSBedrockKB-OpenSearch (MRR: 0.800)
- **成本最优**: AWS Bedrock (Aurora) (~$44/月)


## 四、选型建议

根据时延、吞吐、检索质量与成本对比，建议按场景选型：

| 场景 | 推荐知识库 | 说明 |
|------|------------|------|
| **成本优先、已有 RDS** | AWS Bedrock (Aurora PostgreSQL Serverless) | 约 $44/月，完整 SQL、ACID，适合低中查询量。 |
| **延迟与稳定性优先、预算充足** | AWS Bedrock (OpenSearch) | 专为 k-NN 优化，部署简单，P95 更稳定。 |
| **中文检索与质量优先** | 阿里云百炼 | 中文深度优化、内置 Rerank，适合对 MRR/P@1 要求高的场景。 |
| **国内部署、混合检索** | 火山引擎 VikingDB | 国内延迟低，混合检索 + Rerank 内置，适合国内业务。 |

**简要结论**：
- 选 **Aurora PG**：成本敏感、需 SQL/事务、已有 AWS RDS。
- 选 **OpenSearch**：对 P95/P99 延迟要求高、纯向量检索、可接受较高成本。
- 选 **阿里云百炼**：强调中文语义与检索质量、已有阿里云。
- 选 **火山引擎 VikingDB**：业务在国内、需要混合检索与 Rerank。

---

*本报告由云端知识库性能测试框架自动生成*