# Railway 配置文件
# https://docs.railway.app/deploy/config-as-code

[build]
# 指定构建目录为 web 子目录
builder = "DOCKERFILE"
dockerfilePath = "web/Dockerfile"
watchPatterns = ["web/**"]

[deploy]
# Railway 会自动设置 PORT 环境变量
startCommand = "gunicorn app:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120 --log-level info"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# 健康检查配置（可选）
healthcheckPath = "/health"
healthcheckTimeout = 100
